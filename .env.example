# =================================================================
# MCP Kanban Server Environment Configuration
# =================================================================
# Copy this file to .env and update the values for your environment

# =================================================================
# Server Configuration
# =================================================================
PORT=3000
NODE_ENV=development
HOST=localhost

# =================================================================
# Database Configuration
# =================================================================
DATABASE_PATH=./data/kanban.db
DATABASE_BACKUP_PATH=./data/backups
DATABASE_WAL_MODE=true
DATABASE_MEMORY_LIMIT=268435456
DATABASE_TIMEOUT=30000

# =================================================================
# API Security
# =================================================================
API_KEY_SECRET=your-super-secret-key-here-change-this-in-production
API_KEYS=dev-key-1,dev-key-2
CORS_ORIGIN=http://localhost:3000,http://localhost:3001
CORS_CREDENTIALS=true

# Rate Limiting
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=1000
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# =================================================================
# WebSocket Configuration
# =================================================================
WEBSOCKET_PORT=3001
WEBSOCKET_PATH=/socket.io
WEBSOCKET_CORS_ORIGIN=*
WEBSOCKET_HEARTBEAT_INTERVAL=25000
WEBSOCKET_HEARTBEAT_TIMEOUT=60000

# =================================================================
# Git Integration
# =================================================================
GIT_AUTO_DETECT=true
GIT_BRANCH_PATTERNS=feature/{taskId}-*,{taskId}-*,feat/{taskId}-*
GIT_COMMIT_KEYWORDS=fixes,closes,implements,resolves,completes
GIT_AUTO_TAGS={"feature/*": ["feature"], "bugfix/*": ["bug"], "hotfix/*": ["bug", "urgent"]}

# Repository Mapping
GIT_DEFAULT_BOARD=personal-tasks
GIT_MAPPING_FILE=./config/repo-mappings.json

# =================================================================
# Backup Configuration
# =================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_COMPRESS=true
BACKUP_ENCRYPT=false
BACKUP_ENCRYPTION_KEY=your-backup-encryption-key
BACKUP_INCREMENTAL=true
BACKUP_VERIFY_INTEGRITY=true

# =================================================================
# Logging Configuration
# =================================================================
LOG_LEVEL=info
LOG_FILE=./logs/kanban.log
LOG_MAX_SIZE=10485760
LOG_MAX_FILES=5
LOG_DATE_PATTERN=YYYY-MM-DD-HH
LOG_COMPRESS=true

# Console logging
LOG_CONSOLE=true
LOG_CONSOLE_LEVEL=debug
LOG_CONSOLE_COLORIZE=true

# =================================================================
# Performance & Monitoring
# =================================================================
METRICS_ENABLED=true
METRICS_ENDPOINT=/metrics
METRICS_COLLECT_DEFAULT=true

# Performance settings
MAX_REQUEST_SIZE=10mb
REQUEST_TIMEOUT=30000
KEEP_ALIVE_TIMEOUT=5000

# Memory settings
MAX_MEMORY_USAGE=512
MEMORY_CHECK_INTERVAL=60000

# =================================================================
# AI/MCP Configuration
# =================================================================
MCP_SERVER_NAME=mcp-kanban
MCP_SERVER_VERSION=0.1.0
MCP_TOOLS_ENABLED=true
MCP_MAX_CONTEXT_ITEMS=50
MCP_CONTEXT_LOOKBACK_DAYS=14

# Context generation settings
CONTEXT_CACHE_TTL=300
CONTEXT_MAX_RELATED_TASKS=10
CONTEXT_INCLUDE_COMPLETED=true

# Priority calculation
PRIORITY_RECALC_INTERVAL=3600
PRIORITY_FACTORS='{"age": 0.15, "dependency": 0.30, "deadline": 0.25, "priority": 0.20, "context": 0.10}'
PRIORITY_STALE_THRESHOLD_DAYS=7

# =================================================================
# CLI Configuration
# =================================================================
CLI_DEFAULT_OUTPUT_FORMAT=table
CLI_DEFAULT_BOARD=
CLI_COLORS=true
CLI_PAGER=less
CLI_EDITOR=nano

# =================================================================
# Development Configuration
# =================================================================
# Only used in development mode
DEV_SEED_DATABASE=true
DEV_RESET_ON_START=false
DEV_MOCK_GIT_INTEGRATION=false
DEV_ENABLE_DEBUG_ROUTES=true

# Hot reload settings
DEV_WATCH_FILES=true
DEV_IGNORE_PATTERNS=node_modules/**,dist/**,coverage/**

# =================================================================
# Test Configuration
# =================================================================
# Only used during testing
TEST_DATABASE_PATH=:memory:
TEST_TIMEOUT=10000
TEST_PARALLEL=true
TEST_COVERAGE_THRESHOLD=80

# =================================================================
# Production Overrides
# =================================================================
# These settings are recommended for production deployment

# Security (uncomment for production)
# NODE_ENV=production
# API_KEY_SECRET=generate-a-strong-random-key-here
# CORS_ORIGIN=https://your-domain.com
# LOG_LEVEL=warn
# DEV_ENABLE_DEBUG_ROUTES=false

# Performance (uncomment for production)
# DATABASE_MEMORY_LIMIT=1073741824
# MAX_MEMORY_USAGE=1024
# BACKUP_COMPRESS=true
# BACKUP_ENCRYPT=true

# =================================================================
# Optional External Integrations
# =================================================================
# Uncomment and configure if needed

# Webhook notifications
# WEBHOOK_ENABLED=false
# WEBHOOK_URL=https://your-webhook-endpoint.com
# WEBHOOK_SECRET=your-webhook-secret

# Email notifications (future feature)
# EMAIL_ENABLED=false
# EMAIL_SMTP_HOST=smtp.gmail.com
# EMAIL_SMTP_PORT=587
# EMAIL_USERNAME=your-email@gmail.com
# EMAIL_PASSWORD=your-app-password

# External storage (future feature)
# STORAGE_PROVIDER=local
# S3_BUCKET=your-s3-bucket
# S3_REGION=us-east-1
# S3_ACCESS_KEY=your-access-key
# S3_SECRET_KEY=your-secret-key